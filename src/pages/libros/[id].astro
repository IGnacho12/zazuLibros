---
export const prerender = false;
import Layout from "../../layouts/Layout.astro";

const { id } = Astro.params;

// Traer los libros de la API
const res = await fetch("http://localhost:4321/api/getBooks");
const libros = await res.json();

// Buscar libro por id
const libro = libros.find((l) => String(l.id) === id);

---

<Layout>
  {libro ? (
    <article class="p-6 flex flex-col items-center">
      <h1 class="text-2xl font-bold mb-2 text-center">{libro.nombre}</h1>
      <p class="text-gray-600 mb-4 text-center">Autor: {libro.autor}</p>

      <!-- PDF embebido en navegador -->
      <iframe 
  src={libro.archivo_url} 
  class="w-full h-screen border rounded"
></iframe>
    </article>
  ) : (
    <h1 class="text-center text-xl">ðŸ“• Libro no encontrado</h1>
  )}
</Layout>
